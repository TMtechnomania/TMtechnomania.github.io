/* Optimized newtab CSS: consolidated variables, reduced repetition, clear naming */
:root {
	--scale: 1;
	--gap: calc(0.5rem * var(--scale));
	--pad-y: calc(0.5rem * var(--scale));
	--pad-x: calc(1.25rem * var(--scale));
	--chip-h: calc(2.5rem * var(--scale));
	--chip-icon: calc(1.5rem * var(--scale));
	--pill-icon: calc(1.25rem * var(--scale));
	--bar-h: calc(3.5rem * var(--scale));
	--primary: #0072ff;
	--primary-weak: #0072ff11;
	--surface: #ffffff;
}

/* Reset */
* {
	border: 0;
	box-sizing: border-box;
	margin: 0;
    outline: none;
	padding: 0;
	-webkit-user-drag: none;
	-webkit-user-select: none;
	user-select: none;
}
*::before,
*::after {
	box-sizing: inherit;
}

html,
body {
	height: 100%;
	width: 100%;
	overflow: hidden;
}
body {
	font-family: Arial, Helvetica, sans-serif;
	position: relative;
}

/* Full-bleed wallpaper */
#wallpaper {
	position: fixed;
	inset: 0;
	width: 100%;
	height: 100%;
	object-fit: cover;
	z-index: -1;
}

/* Search bar container */
#searchbar {
	position: absolute;
	transform: translate(-50%, -50%);
	display: flex;
	align-items: center;
	gap: var(--gap);
	height: var(--bar-h);
	min-width: calc(40rem * var(--scale));
	padding: var(--pad-y);
	border-radius: 999px;
	background: var(--surface);
	width: 30vw;
}

/* Engine button (left pill) */
.engine-current {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: var(--chip-h);
	width: var(--chip-h);
	aspect-ratio: 1/1;
	padding: 0;
	border-radius: 999px;
	background: var(--primary-weak);
	color: var(--primary);
	cursor: pointer;
}
.engine-current .engine-current-icon {
	width: calc(var(--pill-icon));
	height: calc(var(--pill-icon));
	object-fit: contain;
	display: block;
}

/* Chips (floating row below the bar) */
.search-engine-chips {
	position: absolute;
	left: 50%;
	top: calc(100% + 8px);
	transform: translateX(-50%);
	display: none;
	gap: var(--gap);
	padding: calc(0.375rem * var(--scale));
	align-items: center;
	justify-content: center;
}
.searchbar-wrapper.chips-open .search-engine-chips {
	display: flex;
}
.search-engine-chip {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: var(--chip-h);
	width: var(--chip-h);
	aspect-ratio: 1/1;
	padding: 0;
	border-radius: 999px;
	background: var(--surface);
	cursor: pointer;
	font-size: calc(0.8125rem * var(--scale));
	color: var(--primary);
}
.search-engine-chip .engine-chip-icon {
	width: var(--chip-icon);
	height: var(--chip-icon);
	object-fit: contain;
	display: block;
}
.search-engine-chip.active {
	background: #fff7;
	box-shadow: none;
}

/* Input */
.search-input {
	flex: 1;
	display: flex;
	align-items: center;
	height: var(--chip-h);
	padding: var(--pad-y) var(--pad-x);
	border-radius: 999px;
	background: var(--primary-weak);
}

/* Voice + Search buttons (appended directly to the wrapper) */
#search-voice-btn,
#search-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: var(--chip-h);
	border-radius: 999px;
	cursor: pointer;
}
#search-voice-btn {
	background: var(--primary-weak);
	color: #fff;
	width: var(--chip-h);
	aspect-ratio: 1/1;
	padding: 0;
}
#search-voice-btn img {
	width: 60%;
	height: 60%;
	object-fit: contain;
}
#search-voice-btn.listening {
	/* When actively listening show solid primary and glow */
	background: var(--primary);
	color: #fff;
	box-shadow: 0 0 0 6px var(--primary-weak);
}
#search-btn {
	background: var(--primary);
	color: #fff;
	padding: 0 var(--pad-x);
	border-radius: 999px;
}

.searchbar-hidden {
	display: none !important;
}

/* Action bar (full-width bar at bottom, auto-hide with hover) */
#actionbar {
	position: fixed;
	left: 0;
	width: 100%;
	height: calc(2 * var(--bar-h)); /* 2x searchbar height */
	background: transparent;
	transition: bottom 0.3s ease;
	z-index: 9997; /* Below searchbar */
}
#actionbar::before {
	content: '';
	position: absolute;
	bottom: calc(-1 * var(--bar-h));
	left: 0;
	width: 100%;
	height: var(--bar-h);
	background: transparent;
	pointer-events: auto; /* allow hover in transparent area */
	z-index: 1; /* sit above wallpaper but below content */
}
#actionbar.autohide {
	/* Hidden by default via class so we can toggle it without inline styles */
	bottom: calc(-1 * var(--bar-h)); /* Hidden by default (height of searchbar) */
}
#actionbar.no-autohide {
	bottom: 0; /* Always visible */
}
#actionbar.autohide:hover,
#actionbar.autohide::before:hover,
#actionbar.autohide:focus-within {
	bottom: 0; /* Show on hover or when a child receives focus */
}

/* Action content (inner container, styled like searchbar) */
#actioncontent {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: var(--gap);
	height: var(--bar-h); /* Same height as searchbar */
	padding: var(--pad-y) var(--pad-x);
	border-radius: 999px;
	background: var(--surface);
	margin: var(--bar-h) auto 0; /* Center vertically in the 2x height container */
	width: 30vw; /* Same as searchbar */
	min-width: calc(40rem * var(--scale));
	position: relative;
	z-index: 2; /* bring content above the pseudo-element */
	transition: opacity 0.25s ease, transform 0.2s ease;
}

/* Hide content when autohide is active until hovered */
#actionbar.autohide #actioncontent {
	opacity: 0;
	pointer-events: none;
	transform: translateY(8px);
}
#actionbar.autohide:hover #actioncontent,
#actionbar.autohide:focus-within #actioncontent {
	opacity: 1;
	pointer-events: auto;
	transform: translateY(0);
}

/* Action bar items (buttons/shortcuts, similar to searchbar) */
.action-item {
	display: flex;
	align-items: center;
	justify-content: center;
	height: var(--chip-h);
	padding: 0 var(--pad-x);
	border-radius: 999px;
	cursor: pointer;
	font-size: calc(0.8125rem * var(--scale));
	color: var(--primary);
	background: var(--primary-weak);
	transition: background 0.2s;
}
.action-item:hover {
	background: var(--primary);
	color: #fff;
}
.action-item img {
	width: var(--chip-icon);
	height: var(--chip-icon);
	margin-right: 0.5rem;
}

/* Vertical separator for visual separation */
.action-separator {
	width: 1px;
	height: var(--chip-h);
	background: rgba(0, 0, 0, 0.1);
	margin: 0 var(--gap);
}
