#searchbar {
	position: absolute;
	display: flex;
    flex-direction: column;
	align-items: center;
	gap: var(--dis-4); /* Gap between clock and search row */
	/* height: var(--dis-6); Removed fixed height */
    height: auto;
	min-width: calc(40rem * var(--ui-scale));
    
    /* Move visual styles to .search-row */
	/* padding: var(--dis-xs); */
	/* border-radius: var(--radius-full); */
	/* background: var(--color-base); */
	width: 30vw;
	z-index: var(--z-searchbar);
}

.search-row {
    display: flex;
    align-items: center;
    gap: var(--dis-xs);
    height: var(--dis-6);
    width: 100%;
    background: var(--color-base);
    border-radius: var(--radius-full);
    padding: var(--dis-xs);
    position: relative; /* For chips anchoring if needed */
}

.engine-current {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: var(--dis-4);
	width: var(--dis-4);
	aspect-ratio: 1/1;
	padding: 0;
	border-radius: var(--radius-full);
	background: var(--color-off);
	color: var(--text-accent);
	cursor: pointer;
}

.engine-current .engine-current-icon {
	width: var(--icon-md);
	height: var(--icon-md);
}

.search-engine-chips {
	position: absolute;
	left: 50%;
	top: calc(100% + var(--dis-1));
	transform: translateX(-50%);
	display: none;
	gap: var(--dis-xs);
	padding: var(--dis-xs);
	align-items: center;
	justify-content: center;
	opacity: 0;
}

.searchbar-wrapper.chips-open .search-engine-chips {
	display: flex;
	animation: chipsContainerIn 0.2s ease-out forwards;
}

.searchbar-wrapper.chips-closing .search-engine-chips {
	display: flex;
	animation: chipsContainerOut 0.15s ease-in forwards;
}

@keyframes chipsContainerIn {
	from {
		opacity: 0;
		transform: translateX(-50%) translateY(-4px);
	}
	to {
		opacity: 1;
		transform: translateX(-50%) translateY(0);
	}
}

@keyframes chipsContainerOut {
	from {
		opacity: 1;
		transform: translateX(-50%) translateY(0);
	}
	to {
		opacity: 0;
		transform: translateX(-50%) translateY(-4px);
	}
}

.search-engine-chip {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: var(--dis-4);
	width: var(--dis-4);
	aspect-ratio: 1/1;
	padding: 0;
	border-radius: var(--radius-full);
	background: var(--color-base);
	cursor: pointer;
	color: var(--text-accent);
	opacity: 0;
	transform: scale(0.5);
	animation: chipIn 0.2s ease-out forwards;
}

@keyframes chipIn {
	from {
		opacity: 0;
		transform: scale(0.5);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

@keyframes chipOut {
	from {
		opacity: 1;
		transform: scale(1);
	}
	to {
		opacity: 0;
		transform: scale(0.5);
	}
}

.search-engine-chip .engine-chip-icon {
	width: var(--icon-md);
	height: var(--icon-md);
}

.search-engine-chip.active {
	background: var(--color-off);
}

.search-input {
	flex: 1;
	display: flex;
	align-items: center;
	height: var(--dis-4);
	padding: var(--dis-xs) var(--dis-2);
	border-radius: var(--radius-full);
	background: var(--color-off);
	color: var(--text-base);
	font-size: calc(1rem * var(--ui-scale));
	font-family: var(--font-family);
}

.search-input::placeholder {
	color: var(--text-off);
}

#search-voice-btn,
#search-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: var(--dis-4);
	border-radius: var(--radius-full);
	cursor: pointer;
}

#search-voice-btn {
	background: var(--color-off);
	color: var(--text-accent);
	width: var(--dis-4);
	aspect-ratio: 1/1;
	padding: 0;
}

#search-voice-btn .search-voice-icon {
	width: var(--icon-md);
	height: var(--icon-md);
}

#search-voice-btn.listening {
	background: var(--color-accent);
	color: var(--text-invert);
}

#search-btn {
	background: var(--color-accent);
	color: var(--text-invert);
	padding: 0 var(--dis-2);
	border-radius: var(--radius-full);
	font-weight: 500;
	font-size: calc(0.95rem * var(--ui-scale));
	font-family: var(--font-family);
}

.searchbar-hidden {
	display: none !important;
}
